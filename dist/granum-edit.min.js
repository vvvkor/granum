/*! granum-edit.js v1.2.88 */
(()=>{var t=(e,a)=>e.querySelectorAll("[contenteditable][data-for]").forEach(e=>{var t=document.getElementById(e.dataset.for);t&&(e.innerHTML=t[a?"defaultValue":"value"])}),r=(e,t,a={})=>{const r=document.createElement(e);return Array.isArray(t)?r.append(...t):t.nodeType?r.append(t):r.innerHTML=t,"string"==typeof a?r.className=a:Object.entries(a).forEach(e=>r.setAttribute(...e)),r},n=(e,t)=>{e.classList.toggle("hide",t),e.nextSibling.classList.toggle("hide",!t),e.previousSibling.querySelectorAll("li+li").forEach(e=>e.classList.toggle("hide",!t))};const o=[["/","source"],["<b>B</b>","bold"],["<i>I</i>","italic"],["<s>S</s>","strikeThrough"],["_","removeFormat"],["&hearts;","insertImage","","https://"],["&nearr;","createLink","","https://"],["&times;","unlink"],["h1","formatBlock","<h1>"],["h2","formatBlock","<h2>"],["h3","formatBlock","<h3>"],["&sect;","formatBlock","<p>"],["&bull;","insertUnorderedList"],["{}","insertHTML","<code>*</code>"],["&lt;","justifyLeft"],["=","justifyCenter"],["&gt;","justifyRight"],["1.","insertOrderedList"],["&raquo;","indent"],["&laquo;","outdent"],["D","formatBlock","<div>"],["[]","formatBlock","<pre>"],["&#8220;","formatBlock","<blockquote>"],["&minus;","insertHorizontalRule"]];document.addEventListener("DOMContentLoaded",e=>{document.querySelectorAll("textarea.editor").forEach(e=>{var a=e.id+"-editor",t=r("ul",o.slice(0,e.classList.contains("l")?100:13).map((e,t)=>r("li",r("a",e[0],{href:"#"+a,"data-cmd":e[1],title:e[1]+" "+(e[2]||"").replace(/>.*$/,">"),"data-arg":e[2]||"","data-ask":e[3]||""}),t?"hide":"")),"bg row hover");e.parentNode.insertBefore(t,e),e.parentNode.insertBefore(r("div","",{class:"hide bord pad back",contenteditable:"",id:a,"data-for":e.id}),e.nextSibling),e.classList.contains("act")&&n(e,!0)}),t(document,!1)}),document.addEventListener("reset",e=>e.defaultPrevented?null:t(e.target,!0)),document.addEventListener("click",e=>{const t=e.target.closest("a[data-cmd]"),a=t?document.getElementById(t.hash.slice(1)):null;a&&(e.preventDefault(),"source"==t.dataset.cmd?n(a.previousSibling,a.classList.contains("hide")):null!=(e=t.dataset.ask?prompt(t.title||t.dataset.cmd,t.dataset.ask):t.dataset.arg?t.dataset.arg.replace("*",getSelection().toString()):"")&&(a.focus(),document.execCommand(t.dataset.cmd,!1,e)))}),document.addEventListener("input",e=>{if(e.target.dataset.for){const t=document.getElementById(e.target.dataset.for);t&&(t.value=e.target.innerHTML),t.dispatchEvent(new CustomEvent("input",{bubbles:!0,detail:1}))}if(e.target.id&&"TEXTAREA"==e.target.tagName&&!e.detail){const a=document.querySelector('[data-for="'+e.target.id+'"]');a&&(a.innerHTML=e.target.value)}})})();